<!doctype html><html><head><title>To-string conversion</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/zotroneneis.github.io/css/bootstrap.min.css><link rel=stylesheet href=/zotroneneis.github.io/css/layouts/main.css><link rel=stylesheet href=/zotroneneis.github.io/css/style.css><link rel=stylesheet href=/zotroneneis.github.io/css/navigators/navbar.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/zotroneneis.github.io/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg><link rel=stylesheet href=/zotroneneis.github.io/css/style.css><meta name=description content="To-string conversion"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/zotroneneis.github.io/css/layouts/single.css><link rel=stylesheet href=/zotroneneis.github.io/css/navigators/sidebar.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/zotroneneis.github.io><img src=/zotroneneis.github.io/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg>Anna-Lena Popkes</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/zotroneneis.github.io/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg class=d-none id=main-logo>
<img src=/zotroneneis.github.io/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg class=d-none id=inverted-logo></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><input type=text placeholder=Search data-search id=search-box><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/zotroneneis.github.io/posts data-filter=all>Posts</a></li><div class=subtree><li><a href=zotroneneis.github.io/posts/my_path_to_ml/>My path to machine learning</a></li><li><i class="fas fa-plus-circle"></i><a href=zotroneneis.github.io/posts/books/>Books</a><ul><li><a href=zotroneneis.github.io/posts/books/reading_list/>Personal reading List</a></li><li><a href=zotroneneis.github.io/posts/books/deep_work/>Deep work</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=zotroneneis.github.io/posts/machine_learning/>Machine Learning</a><ul><li><a href=zotroneneis.github.io/posts/machine_learning/kl_divergence/>KL Divergence</a></li><li><a href=zotroneneis.github.io/posts/machine_learning/variational_inference/>Variational Inference</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=zotroneneis.github.io/posts/python/>Python</a><ul class=active><li><a href=zotroneneis.github.io/posts/python/mocking/>Mocking</a></li><li><i class="fas fa-minus-circle"></i><a class=active href=zotroneneis.github.io/posts/python/magical_universe/>Magical Universe</a><ul class=active><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_1_start/>Start</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_1_magical_universe/>The Tales of Castle Kilmere</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_1_first_post_oop/>Object-oriented programming</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_2_types_of_methods/>Types of methods</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_3_type_annotations/>Type annotations</a></li><li><a class=active href=zotroneneis.github.io/posts/python/magical_universe/day_4_to_string_conversion/>To-string conversion</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_5_decorators/>Decorators</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_6_properties/>Properties</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_7_underscore_patterns/>Underscore patterns</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_8_extending_universe/>Extending the universe</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_9_duck_typing/>Duck Typing</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_10_11_namedtuples/>Namedtuples</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_12_to_15_abcs/>Abstract Base Classes</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_16_to_18_data_classes/>Data classes</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_19_immutable_data_classes/>Immutable data classes</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_20_decorators_in_classes/>Decorators in classes</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_21_if_main/>if __name__ == "__main__"</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_22_to_24_context_managers/>Context managers</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_25_to_28_pytest/>Testing with pytest</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_29_to_31_iterators/>Iterators</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_34_multisets/>Multisets</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_37_extending_universe/>Extending the universe II</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_43_to_45_exception_classes/>Exception classes</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_46_functools_wraps/>functools.wraps</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_47_to_48_defaultdict/>Defaultdict</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/day_49_to_50_config_files/>Config files</a></li><li><a href=zotroneneis.github.io/posts/python/magical_universe/2018-09-16-blog-post-day-51/>Wrap up</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=zotroneneis.github.io/posts/software_engineering/>Software Engineering</a><ul><li><a href=zotroneneis.github.io/posts/software_engineering/containers/>Intro to containers</a></li><li><a href=zotroneneis.github.io/posts/software_engineering/docker/>Intro to Docker</a></li><li><a href=zotroneneis.github.io/posts/software_engineering/virtual_machines/>Intro to virtual machines</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(zotroneneis.github.io/zotroneneis.github.io/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/zotroneneis.github.io/images/author/image_al.jpg><h5 class=author-name>Anna-Lena Popkes</h5><p>July 26, 2018</p></div><div class=title><h1>To-string conversion</h1></div><div class=post-content id=post-content><p><strong>Topics:</strong> to-string conversion, <code>__repr__, __str__</code><br><strong>Updated:</strong> 2020-10-04</p><h2 id=to-string-conversion>To-string conversion</h2><p>Today we are going to look at the two methods that control how an object is converted into a string object. When we just print an object, we won&rsquo;t get a useful representation. For example, when trying to print the <code>bromley</code> instance:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>bromley <span style=color:#f92672>=</span> CastleKilmereMember(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Bromley Huckabee&#39;</span>, birthyear<span style=color:#f92672>=</span><span style=color:#ae81ff>1959</span>, sex<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;male&#39;</span>)
<span style=color:#66d9ef>print</span>(bromley)
</code></pre></div><p>We get this output: <code>&lt;__main__.CastleKilmereMember object at 0x7f81853bfc50></code>. It contains the name of the class an the ID of the object (its memory address). This is not very useful when we want to know what the object is. But there is a simple solution to our problem!</p><p>We can control how objects of our classes are converted into string objects. Specifically, the to-string conversion is controlled by two methods: <code>__repr__</code> and <code>__str__</code> that serve different purposes:</p><p>The result of the <code>__repr__</code> method should be as <em>unambiguous</em> as possible. It should function as a debugging aid for developers. Therefore, it should be explicit about what the object is. Furthermore, if possible, <code>__repr__</code> should return a representation of the instance that can be used to recreate it.</p><p>The result of the <code>__str__</code> method should be <em>readable</em>. Just think about how the object should look like for a user, not a developer.</p><p>By defining these special Python methods we can control how our objects will be represented when converting them into strings. It&rsquo;s recommended to implement at least the <code>__repr__</code> method for a class. Why <code>__repr__</code>? Because it will ensure a useful conversion of objects to strings. When Python looks for the <code>__str__</code> method but <code>__str__</code> hasn&rsquo;t been implemented, it will fall back to using <code>__repr__</code>. So as long as <code>__repr__</code> is defined we will get a helpful representation of our object.</p><p>Let&rsquo;s add a <code>__repr__</code> method to our CastleKilmereMember class!</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CastleKilmereMember</span>:
    <span style=color:#66d9ef>def</span> __init__(self, name: str, birthyear: int, sex: str):
        <span style=color:#f92672>...</span>

    <span style=color:#66d9ef>def</span> __repr__(self) <span style=color:#f92672>-&gt;</span> str:
        <span style=color:#66d9ef>return</span> (f<span style=color:#e6db74>&#34;{self.__class__.__name__}(name=&#39;{self.name}&#39;, &#34;</span>
                f<span style=color:#e6db74>&#34;birthyear={self.birthyear}, sex=&#39;{self.sex}&#39;)&#34;</span>)
</code></pre></div><p>Now, the string representation of Bromley is much more useful</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>print</span>(bromley)
<span style=color:#f92672>&gt;&gt;&gt;</span> CastleKilmereMember(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Bromley Huckabee&#39;</span>, birthyear<span style=color:#f92672>=</span><span style=color:#ae81ff>1959</span>, sex<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;male&#39;</span>)
</code></pre></div><p>Further, we can use the output of our <code>__repr__</code> method to re-create the Bromley instance. This is done by first calling <code>__repr__</code> and evaluating the result:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>bromley <span style=color:#f92672>==</span> eval(repr(bromley))
<span style=color:#f92672>&gt;&gt;&gt;</span> True
</code></pre></div><p>Since our subclasses inherit all methods from the parent class they will also contain an implementation for <code>__repr__</code>. But we want the output of <code>__repr__</code> to be as unambiguous as possible. Therefore, we should add separate <code>__repr__</code> methods to ensure that we use all information we have about the objects. For example, the <code>__repr__</code> implementation of the <code>Professor</code> class will look as follows:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Professor</span>(CastleKilmereMember):
    <span style=color:#e6db74>&#34;&#34;&#34; Creates a Castle Kilmere professor &#34;&#34;&#34;</span>
    <span style=color:#f92672>...</span>
    <span style=color:#66d9ef>def</span> __repr__(self) <span style=color:#f92672>-&gt;</span> str:
        <span style=color:#66d9ef>return</span> (f<span style=color:#e6db74>&#34;{self.__class__.__name__}(name=&#39;{self.name}&#39;, &#34;</span>
                f<span style=color:#e6db74>&#34;birthyear={self.birthyear}, sex=&#39;{self.sex}&#39;, &#34;</span>
		f<span style=color:#e6db74>&#34;subject=&#39;{self.subject}&#39;)&#34;</span>)
</code></pre></div></div><div class=btn-improve-page><a href=https://github.com/zotroneneis/zotroneneis.github.io/edit/main/content/posts/python/magical_universe/day_4_to_string_conversion.md><i class="fas fa-code-branch"></i>Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=zotroneneis.github.io/posts/python/magical_universe/day_5_decorators/ class="btn btn-outline-info"><span><i class="fas fa-chevron-circle-left"></i>Prev</span><br><span>Decorators</span></a></div><div class="col-md-6 next-article"><a href=zotroneneis.github.io/posts/python/magical_universe/day_3_type_annotations/ class="btn btn-outline-info"><span>Next <i class="fas fa-chevron-circle-right"></i></span><br><span>Type annotations</span></a></div></div><hr></div></div></div></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#to-string-conversion>To-string conversion</a></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=#about>About</a></li><li class=nav-item><a class=smooth-scroll href=#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>popkes@gmx.net</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=#><img src=/zotroneneis.github.io/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_2.png>
Toha</a></div><div class="col-md-4 text-center">Â© 2020-2021 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/>Powered by
<img src=/zotroneneis.github.io/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/zotroneneis.github.io/js/jquery-3.4.1.min.js></script><script src=/zotroneneis.github.io/js/popper.min.js></script><script src=/zotroneneis.github.io/js/bootstrap.min.js></script><script src=/zotroneneis.github.io/js/navbar.js></script><script src=/zotroneneis.github.io/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/zotroneneis.github.io/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>