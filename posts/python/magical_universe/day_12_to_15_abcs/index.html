<!doctype html><html><head><title>Abstract Base Classes</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/navigators/navbar.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><link rel=icon type=image/png href=/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg><link rel=stylesheet href=/css/style.css><meta name=description content="Abstract Base Classes"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg>Anna-Lena Popkes</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div><img src=/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg class=d-none id=main-logo>
<img src=/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg class=d-none id=inverted-logo></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><input type=text placeholder=Search data-search id=search-box><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><a href=/posts/my_path_to_ml/>My path to machine learning</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/books/>Books</a><ul><li><a href=/posts/books/reading_list/>Personal reading List</a></li><li><a href=/posts/books/deep_work/>Deep work</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/machine_learning/>Machine Learning</a><ul><li><a href=/posts/machine_learning/kl_divergence/>KL Divergence</a></li><li><a href=/posts/machine_learning/variational_inference/>Variational Inference</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/python/>Python</a><ul class=active><li><a href=/posts/python/mocking/>Mocking</a></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/python/magical_universe/>Magical Universe</a><ul class=active><li><a href=/posts/python/magical_universe/day_1_start/>Start</a></li><li><a href=/posts/python/magical_universe/day_1_magical_universe/>The Tales of Castle Kilmere</a></li><li><a href=/posts/python/magical_universe/day_1_first_post_oop/>Object-oriented programming</a></li><li><a href=/posts/python/magical_universe/day_2_types_of_methods/>Types of methods</a></li><li><a href=/posts/python/magical_universe/day_3_type_annotations/>Type annotations</a></li><li><a href=/posts/python/magical_universe/day_4_to_string_conversion/>To-string conversion</a></li><li><a href=/posts/python/magical_universe/day_5_decorators/>Decorators</a></li><li><a href=/posts/python/magical_universe/day_6_properties/>Properties</a></li><li><a href=/posts/python/magical_universe/day_7_underscore_patterns/>Underscore patterns</a></li><li><a href=/posts/python/magical_universe/day_8_extending_universe/>Extending the universe</a></li><li><a href=/posts/python/magical_universe/day_9_duck_typing/>Duck Typing</a></li><li><a href=/posts/python/magical_universe/day_10_11_namedtuples/>Namedtuples</a></li><li><a class=active href=/posts/python/magical_universe/day_12_to_15_abcs/>Abstract Base Classes</a></li><li><a href=/posts/python/magical_universe/day_16_to_18_data_classes/>Data classes</a></li><li><a href=/posts/python/magical_universe/day_19_immutable_data_classes/>Immutable data classes</a></li><li><a href=/posts/python/magical_universe/day_20_decorators_in_classes/>Decorators in classes</a></li><li><a href=/posts/python/magical_universe/day_21_if_main/>if __name__ == "__main__"</a></li><li><a href=/posts/python/magical_universe/day_22_to_24_context_managers/>Context managers</a></li><li><a href=/posts/python/magical_universe/day_25_to_28_pytest/>Testing with pytest</a></li><li><a href=/posts/python/magical_universe/day_29_to_31_iterators/>Iterators</a></li><li><a href=/posts/python/magical_universe/day_34_multisets/>Multisets</a></li><li><a href=/posts/python/magical_universe/day_37_extending_universe/>Extending the universe II</a></li><li><a href=/posts/python/magical_universe/day_43_to_45_exception_classes/>Exception classes</a></li><li><a href=/posts/python/magical_universe/day_46_functools_wraps/>functools.wraps</a></li><li><a href=/posts/python/magical_universe/day_47_to_48_defaultdict/>Defaultdict</a></li><li><a href=/posts/python/magical_universe/day_49_to_50_config_files/>Config files</a></li><li><a href=/posts/python/magical_universe/2018-09-16-blog-post-day-51/>Wrap up</a></li></ul></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/software_engineering/>Software Engineering</a><ul><li><a href=/posts/software_engineering/containers/>Intro to containers</a></li><li><a href=/posts/software_engineering/docker/>Intro to Docker</a></li><li><a href=/posts/software_engineering/virtual_machines/>Intro to virtual machines</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://alpopkes.com/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/image_al.jpg><h5 class=author-name>Anna-Lena Popkes</h5><p>August 4, 2018</p></div><div class=title><h1>Abstract Base Classes</h1></div><div class=post-content id=post-content><p><strong>Topics:</strong> Abstract Base Classes, ABC&rsquo;s<br><strong>Updated</strong> 2020-10-05</p><p>The last days I have been working on a lot of new classes and methods. Since they all belong to the same big concept, I decided to create one big post on the whole topic instead of several small ones. So let&rsquo;s get right into it!</p><h2 id=abtract-base-classes>Abtract Base Classes</h2><p>Up to now, our Magical Universe has a parent class (<code>CastleKilmereMember</code>) and several child classes (<code>Pupil, Professor</code>, etc.) that inherit all methods from the parent class. But there are other, more advanced applications where simple inheritance is not sufficient.</p><p>Abstract base classes are useful if your application involves a <em>hierarchy</em> of classes. In particular, in this hierarchy<br>a) It should be impossible to instantiate the base class<br>b) All subclasses should have a common base class<br>c) All subclasses should implement certain methods defined in the base class</p><p>Abstract base classes serve three purposes:</p><ol><li>First, the let a parent class communicate that subclasses should have a certain structure</li><li>Second, they allow classes to identify themselves as having the required structure, that is, meeting the demanded requirements</li><li>Third, they enforce that a subclass meets the requirements, otherwise throwing an exception at instantiation time</li></ol><p>Before jumping to further explanations, let&rsquo;s look at an example.</p><h2 id=the-spell-class>The <code>Spell</code> class</h2><p>In the world, lots of different types of spells exist. In particular, a spell can belong to one of seven classes. This makes the <code>Spell</code> class a great application for Python&rsquo;s <a href=https://docs.python.org/3/library/abc.html>abc module</a>. To use an Abstract Base Class, we import Python&rsquo;s abc module and flag the method that MUST be implemented by all subclasses with the decorator <code>@abstractmethod</code>. A spell should have a name, an incantation and a certain effect. Also, each spell subclass will have a defining feature, as well as a <code>cast</code> method.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>from</span> abc <span style=color:#f92672>import</span> ABC, abstractmethod

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Spell</span>(ABC):
    <span style=color:#e6db74>&#34;&#34;&#34;Creates a spell&#34;&#34;&#34;</span>
    <span style=color:#66d9ef>def</span> __init__(self, name: str, incantation: str, effect: str):
        self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name
        self<span style=color:#f92672>.</span>incantation <span style=color:#f92672>=</span> incantation
        self<span style=color:#f92672>.</span>effect <span style=color:#f92672>=</span> effect

    <span style=color:#a6e22e>@abstractmethod</span>
    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>cast</span>(self):
        <span style=color:#66d9ef>pass</span>

    <span style=color:#a6e22e>@property</span>
    <span style=color:#a6e22e>@abstractmethod</span>
    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>defining_feature</span>(self):
        <span style=color:#66d9ef>pass</span>

    <span style=color:#66d9ef>def</span> __repr__(self):
        <span style=color:#66d9ef>return</span> (f<span style=color:#e6db74>&#34;{self.__class__.__name__}(name=&#39;{self.name}&#39;, &#34;</span>
               f<span style=color:#e6db74>&#34;incantation=&#39;{self.incantation}&#39;, effect=&#39;{self.effect}&#39;)&#34;</span>)
</code></pre></div><p>Let&rsquo;s test whether we can instantiate the <code>Spell</code> class.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>stuporus_ratiato <span style=color:#f92672>=</span> Spell(<span style=color:#e6db74>&#39;The stuporus ratiato spell&#39;</span>, <span style=color:#e6db74>&#39;Stuporus Ratiato&#39;</span>, <span style=color:#e6db74>&#39;Makes objects fly&#39;</span>)
</code></pre></div><p>As expected, this raises an error: <code>TypeError: Can't instantiate abstract class Spell with abstract methods cast, defining_feature</code>. Great! So let&rsquo;s create a subclass. In case you didn&rsquo;t know: a spell can be either a transfiguration, charm, jinx, hex, curse, counter-spell or healing-spell. The <code>Charm</code> class might look as follows:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Charm</span>(Spell):
    <span style=color:#66d9ef>def</span> __init__(self, name: str, incantation: str, effect: str, difficulty: str <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Simple&#39;</span>, min_year: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>):
        super()<span style=color:#f92672>.</span>__init__(name, incantation, effect)
        self<span style=color:#f92672>.</span>difficulty <span style=color:#f92672>=</span> difficulty
        self<span style=color:#f92672>.</span>min_year <span style=color:#f92672>=</span> min_year

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>cast</span>(self):
        <span style=color:#66d9ef>print</span>(f<span style=color:#e6db74>&#34;{self.incantation}!&#34;</span>)
</code></pre></div><p>Let&rsquo;s instantiate a charm everyone knows.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>stuporus_ratiatio <span style=color:#f92672>=</span> Charm(<span style=color:#e6db74>&#39;The stuporus ratiato charm&#39;</span>, <span style=color:#e6db74>&#39;Stuporus Ratiato&#39;</span>, <span style=color:#e6db74>&#39;Makes objects fly&#39;</span>)
</code></pre></div><p>Well, this is not working. It raises an error <em>at instantiation time</em>: <code>TypeError: Can't instantiate abstract class Charm with abstract methods defining_feature</code>. Why? Because we forgot to implement the <code>defining_feature</code> method!</p><p>This highlights a big advantage of using Abstact Base Classes: if a subclass does not implement all the methods required by the base class, an error is raised at <em>instantiation time</em>. When not using abtract base classes, we get an error much later, namely only when calling the missing method. A complete implementation of <code>Charm</code> should look as follows:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Charm</span>(Spell):
    <span style=color:#e6db74>&#34;&#34;&#34; Creates a charm &#34;&#34;&#34;</span>
    <span style=color:#66d9ef>def</span> __init__(self, name: str, incantation: str, effect: str, difficulty: str <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Simple&#39;</span>, min_year: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>):
        super()<span style=color:#f92672>.</span>__init__(name, incantation, effect)
        self<span style=color:#f92672>.</span>difficulty <span style=color:#f92672>=</span> difficulty
        self<span style=color:#f92672>.</span>min_year <span style=color:#f92672>=</span> min_year

    <span style=color:#a6e22e>@property</span>
    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>defining_feature</span>(self) <span style=color:#f92672>-&gt;</span> str:
        <span style=color:#66d9ef>return</span> (<span style=color:#e6db74>&#34;Alteration of the object&#39;s inherent qualities, that is, its behaviour and capabilities&#34;</span>)

    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>cast</span>(self):
        <span style=color:#66d9ef>print</span>(f<span style=color:#e6db74>&#34;{self.incantation}!&#34;</span>)
</code></pre></div><p>Now</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>stuporus_ratiato <span style=color:#f92672>=</span> Charm(<span style=color:#e6db74>&#39;The stuporus ratiato charm&#39;</span>, <span style=color:#e6db74>&#39;Stuporus Ratiato&#39;</span>, <span style=color:#e6db74>&#39;Makes objects fly&#39;</span>)
<span style=color:#66d9ef>print</span>(charm)
</code></pre></div><p>works just fine and prints: <code>Charm(name='The stuporus ratiato charm', incantation='Stuporus Ratiato', effect='Makes objects fly')</code></p><h2 id=how-to-combine-abstractmethod-with-other-decorators>How to combine @abstractmethod with other decorators</h2><p>You might noticed another new thing in the code of <code>Spell</code>: we <em>stacked</em> two decorators. When stacking decorators it&rsquo;s important to know that they are applied <em>from bottom to top</em>. So calling</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#a6e22e>@property</span>
<span style=color:#a6e22e>@abstractmethod</span>
<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>defining_feature</span>(self):
    <span style=color:#66d9ef>pass</span>
</code></pre></div><p>is equivalent to <code>defining_feature = property(abstractmethod(defining_feature))</code>. But in which place should <code>@abstractmethod</code> go when combining it with other decorators? According to the <a href=https://docs.python.org/3/library/abc.html>docs</a>: &ldquo;When <code>abstractmethod()</code> is applied in combination with other method descriptors, it should be applied as the innermost decorator&rdquo;. So keep that in mind when using additional decorators!</p><h2 id=further-advantages-of-abstract-base-classes>Further advantages of Abstract Base Classes</h2><p>Apart from the benefits of abstract base classes we have already discussed, ABC&rsquo;s have other advantages and characteristics that are worth knowing. There is an <a href=https://stackoverflow.com/questions/3570796/why-use-abstract-base-classes-in-python>excellent blog post</a> on &ldquo;Why use Abstract Base Classes in Python?&rdquo; that explains the further functionalities of Python&rsquo;s ABC&rsquo;s in detail.</p><h2 id=further-extensions-of-the-magical-universe>Further extensions of the Magical Universe</h2><p>When implementing the <code>Spell</code> class and its subclasses, I made sure that the <code>Pupil</code> and <code>DarkArmyMember</code> class got a <code>cast_spell</code> method. Since our Magical Universe should stay realistic a pupil has to study a spell before she/he is able to perform it. Also, only certain spells are taught at certain years. If you are highly intelligent (like Lissy Spinster), you might be able to perform a spell earlier than less gifted students.</p></div><div class=btn-improve-page><a href=https://github.com/zotroneneis/zotroneneis.github.io/edit/main/content/posts/python/magical_universe/day_12_to_15_abcs.md><i class="fas fa-code-branch"></i>Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/python/magical_universe/day_16_to_18_data_classes/ class="btn btn-outline-info"><span><i class="fas fa-chevron-circle-left"></i>Prev</span><br><span>Data classes</span></a></div><div class="col-md-6 next-article"><a href=/posts/python/magical_universe/day_10_11_namedtuples/ class="btn btn-outline-info"><span>Next <i class="fas fa-chevron-circle-right"></i></span><br><span>Namedtuples</span></a></div></div><hr></div></div></div></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#abtract-base-classes>Abtract Base Classes</a></li><li><a href=#the-spell-class>The <code>Spell</code> class</a></li><li><a href=#how-to-combine-abstractmethod-with-other-decorators>How to combine @abstractmethod with other decorators</a></li><li><a href=#further-advantages-of-abstract-base-classes>Further advantages of Abstract Base Classes</a></li><li><a href=#further-extensions-of-the-magical-universe>Further extensions of the Magical Universe</a></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=#about>About</a></li><li class=nav-item><a class=smooth-scroll href=#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=#appearances>Talks & Podcasts</a></li><li class=nav-item><a class=smooth-scroll href=#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>popkes@gmx.net</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=#><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_2.png>
Toha</a></div><div class="col-md-4 text-center">Â© 2020-2021 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/js/jquery-3.4.1.min.js></script><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/navbar.js></script><script src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>