<!doctype html><html lang=en><head><title>Duck typing, EAFP principle</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.c27cd4e332ca297fb25625ebfb0fd08824b3344ee00869c5bc395be617ba225b.css integrity="sha256-wnzU4zLKKX+yViXr+w/QiCSzNE7gCGnFvDlb5he6Ils="><link rel=icon type=image/png href=/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg><meta property="og:title" content="Duck typing, EAFP principle"><meta property="og:description" content="Topics: Duck typing, EAFP principle Updated 2020-10-04
Duck typing Today we are going to look at some fundamental philosophies of programming: duck typing, EAFP and its opposite LBYL. Some of you may have heard of these principles already. However, because they are so fundamental we want to make sure that we apply them to our magical universe correctly.
So what is duck typing? The most common saying regarding duck typing is “If it walks like a duck, and it quacks like a duck, then it must be a duck."><meta property="og:type" content="article"><meta property="og:url" content="https://alpopkes.com/posts/python/magical_universe/day_9_duck_typing/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-07-31T00:00:00+00:00"><meta property="article:modified_time" content="2018-07-31T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Duck typing, EAFP principle"><meta name=twitter:description content="Topics: Duck typing, EAFP principle Updated 2020-10-04
Duck typing Today we are going to look at some fundamental philosophies of programming: duck typing, EAFP and its opposite LBYL. Some of you may have heard of these principles already. However, because they are so fundamental we want to make sure that we apply them to our magical universe correctly.
So what is duck typing? The most common saying regarding duck typing is “If it walks like a duck, and it quacks like a duck, then it must be a duck."><meta name=description content="Duck typing, EAFP principle"><script>theme=localStorage.getItem("darkmode:color-scheme")||"system",theme=="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/><img src=/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg id=logo alt=Logo>
Anna-Lena Popkes</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-toggle=collapse data-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/#experiences>Experiences</a></li><li class=nav-item><a class=nav-link href=/#education>Education</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>More</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/#education>Education</a>
<a class=dropdown-item href=/#recent-posts>Recent Posts</a>
<a class=dropdown-item href=/#appearances>Talks & Podcasts</a></div></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg class=d-none id=main-logo alt=Logo>
<img src=/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_42x0_resize_q75_box.jpg class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><a class=list-link href=/posts/news/ title="Personal news">Personal news</a></li><li><a class=list-link href=/posts/my_path_to_ml/ title="My path to machine learning">My path to machine learning</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/books/> Books</a><ul><li><a class=list-link href=/posts/books/reading_list/ title="Personal reading List">Personal reading List</a></li><li><a class=list-link href=/posts/books/deep_work/ title="Deep work">Deep work</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/machine_learning/> Machine Learning</a><ul><li><a class=list-link href=/posts/machine_learning/bayesian_linear_regression/ title="Bayesian linear regression">Bayesian linear regression</a></li><li><a class=list-link href=/posts/machine_learning/bayesian_linear_regression_2/ title="Bayesian linear regression 2">Bayesian linear regression 2</a></li><li><a class=list-link href=/posts/machine_learning/kl_divergence/ title="KL Divergence">KL Divergence</a></li><li><a class=list-link href=/posts/machine_learning/principal_component_analysis/ title="Principal component analysis (PCA)">Principal component analysis (PCA)</a></li><li><a class=list-link href=/posts/machine_learning/support_vector_machines/ title="Support vector machines">Support vector machines</a></li><li><a class=list-link href=/posts/machine_learning/variational_inference/ title="Variational Inference">Variational Inference</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/python/> Python</a><ul class=active><li><a class=list-link href=/posts/python/mocking/ title=Mocking>Mocking</a></li><li><a class=list-link href=/posts/python/packaging_tools/ title="Packaging tools">Packaging tools</a></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/python/magical_universe/> Magical Universe</a><ul class=active><li><a class=list-link href=/posts/python/magical_universe/day_1_start/ title=Start>Start</a></li><li><a class=list-link href=/posts/python/magical_universe/day_1_magical_universe/ title="The Tales of Castle Kilmere">The Tales of Castle Kilmere</a></li><li><a class=list-link href=/posts/python/magical_universe/day_1_first_post_oop/ title="Object-oriented programming">Object-oriented programming</a></li><li><a class=list-link href=/posts/python/magical_universe/day_2_types_of_methods/ title="Types of methods">Types of methods</a></li><li><a class=list-link href=/posts/python/magical_universe/day_3_type_annotations/ title="Type annotations">Type annotations</a></li><li><a class=list-link href=/posts/python/magical_universe/day_4_to_string_conversion/ title="To-string conversion">To-string conversion</a></li><li><a class=list-link href=/posts/python/magical_universe/day_5_decorators/ title=Decorators>Decorators</a></li><li><a class=list-link href=/posts/python/magical_universe/day_6_properties/ title=Properties>Properties</a></li><li><a class=list-link href=/posts/python/magical_universe/day_7_underscore_patterns/ title="Underscore patterns">Underscore patterns</a></li><li><a class=list-link href=/posts/python/magical_universe/day_8_extending_universe/ title="Extending the universe">Extending the universe</a></li><li><a class="active list-link" href=/posts/python/magical_universe/day_9_duck_typing/ title="Duck Typing">Duck Typing</a></li><li><a class=list-link href=/posts/python/magical_universe/day_10_11_namedtuples/ title=Namedtuples>Namedtuples</a></li><li><a class=list-link href=/posts/python/magical_universe/day_12_to_15_abcs/ title="Abstract Base Classes">Abstract Base Classes</a></li><li><a class=list-link href=/posts/python/magical_universe/day_16_to_18_data_classes/ title="Data classes">Data classes</a></li><li><a class=list-link href=/posts/python/magical_universe/day_19_immutable_data_classes/ title="Immutable data classes">Immutable data classes</a></li><li><a class=list-link href=/posts/python/magical_universe/day_20_decorators_in_classes/ title="Decorators in classes">Decorators in classes</a></li><li><a class=list-link href=/posts/python/magical_universe/day_21_if_main/ title='if __name__ == "__main__"'>if __name__ == "__main__"</a></li><li><a class=list-link href=/posts/python/magical_universe/day_22_to_24_context_managers/ title="Context managers">Context managers</a></li><li><a class=list-link href=/posts/python/magical_universe/day_25_to_28_pytest/ title="Testing with pytest">Testing with pytest</a></li><li><a class=list-link href=/posts/python/magical_universe/day_29_to_31_iterators/ title=Iterators>Iterators</a></li><li><a class=list-link href=/posts/python/magical_universe/day_34_multisets/ title=Multisets>Multisets</a></li><li><a class=list-link href=/posts/python/magical_universe/day_37_extending_universe/ title="Extending the universe II">Extending the universe II</a></li><li><a class=list-link href=/posts/python/magical_universe/day_43_to_45_exception_classes/ title="Exception classes">Exception classes</a></li><li><a class=list-link href=/posts/python/magical_universe/day_46_functools_wraps/ title=functools.wraps>functools.wraps</a></li><li><a class=list-link href=/posts/python/magical_universe/day_47_to_48_defaultdict/ title=Defaultdict>Defaultdict</a></li><li><a class=list-link href=/posts/python/magical_universe/day_49_to_50_config_files/ title="Config files">Config files</a></li><li><a class=list-link href=/posts/python/magical_universe/2018-09-16-blog-post-day-51/ title="Wrap up">Wrap up</a></li></ul></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/software_engineering/> Software Engineering</a><ul><li><a class=list-link href=/posts/software_engineering/containers/ title="Intro to containers">Intro to containers</a></li><li><a class=list-link href=/posts/software_engineering/docker/ title="Intro to Docker">Intro to Docker</a></li><li><a class=list-link href=/posts/software_engineering/virtual_machines/ title="Intro to virtual machines">Intro to virtual machines</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/image_al_hu6aa485cfd64a98f54b411e3a0324b396_178285_120x120_fit_q75_box.jpg alt="Author Image"><h5 class=author-name>Anna-Lena Popkes</h5><p class=text-muted>Tuesday, July 31, 2018</p></div><div class=title><h1>Duck typing, EAFP principle</h1></div><div class=post-content id=post-content><p><strong>Topics:</strong> Duck typing, EAFP principle<br><strong>Updated</strong> 2020-10-04</p><h2 id=duck-typing>Duck typing</h2><p>Today we are going to look at some fundamental philosophies of programming: duck typing, EAFP and its opposite LBYL. Some of you may have heard of these principles already. However, because they are so fundamental we want to make sure that we apply them to our magical universe correctly.</p><p>So what is duck typing? The most common saying regarding duck typing is “If it walks like a duck, and it quacks like a duck, then it must be a duck.” But what the heck does this mean? I think it&rsquo;s easiest to explain this by an example.</p><p>Let&rsquo;s say our <code>Pupil</code> and our <code>Ghost</code> classes have a method called <code>fly</code>. Lets further say that we have a method <code>lets_fly</code> which gets an object as an input, checks whether that object is a Ghost and, if that&rsquo;s the case, calls the fly method on the object. If the given object is NOT a ghost, the method will print that you have to be a ghost in order to fly. Next, we create Lissy, one of our pupils, and the Mocking Knight, one of Castle Kilmeres ghosts.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Pupil</span>(CastleKilmereMember):
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fly</span>(self):
</span></span><span style=display:flex><span>    	print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>: I&#39;m flying!&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Ghost</span>(CastleKilmereMember):
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fly</span>(self):
</span></span><span style=display:flex><span>    	print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>: Whooooosh!&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>lets_fly</span>(thing):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> isinstance(thing, Ghost):
</span></span><span style=display:flex><span>    	thing<span style=color:#f92672>.</span>fly()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>    	print(<span style=color:#e6db74>&#34;You have to be a ghost in order to fly!&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>lissy <span style=color:#f92672>=</span> Pupil<span style=color:#f92672>.</span>lissy()
</span></span><span style=display:flex><span>mocking_knight <span style=color:#f92672>=</span> Ghost(<span style=color:#e6db74>&#39;The Mocking Knight&#39;</span>, <span style=color:#ae81ff>1401</span>, <span style=color:#e6db74>&#39;male&#39;</span>, <span style=color:#ae81ff>1492</span>)
</span></span></code></pre></div><p>Now, what is the output of calling <code>lets_fly</code> on the Mocking Knight versus calling it with Lissy as an input? As we can see below, the first statement makes the Mocking Knight fly, whereas the second does not work. Is this the behaviour we want? I don&rsquo;t think so. After all, pupils can fly, too! They just need a broomstick to do so. This is where duck typing comes into place</p><pre tabindex=0><code>lets_fly(mocking_knight)
&gt;&gt;&gt; The Mocking Knight: Whooooosh!

lets_fly(lissy)
&gt;&gt;&gt; You have to be a ghost in order to fly!
</code></pre><p><strong>Duck typing</strong> is used to determine if an object can be used for a certain purpose. To do this not the <em>type</em> of the object is important but the <em>methods and properties</em> it has. This is precisely what we just talked about with the ghosts and pupils. It doesn&rsquo;t matter if you are a ghost or a pupil as long as you have a method that allows you to fly! With this knowledge we can rewrite our code as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>lets_fly</span>(thing):
</span></span><span style=display:flex><span>    thing<span style=color:#f92672>.</span>fly()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>lets_fly(mocking_knight)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> The Mocking Knight: Whooooosh<span style=color:#960050;background-color:#1e0010>!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>lets_fly(lissy)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> Lissy Spinster: I<span style=color:#e6db74>&#39;m flying!</span>
</span></span></code></pre></div><p>But wait a second. Don&rsquo;t we have to check if the fly method exists to make sure that no errors occur? Absolutely! This is where EAFP, a principle closely related to Duck Typing comes into play.</p><h2 id=easier-to-ask-for-forgiveness-than-permission>Easier to ask for forgiveness than permission</h2><p>EAFP is short for &ldquo;easier to ask for forgiveness than permission&rdquo;. EAFP is a common coding style that is not unique to Python but used in several other programming languages. The main idea behind EAFP is to assume that valid keys or attributes exist, instead of checking that they exist first and only afterwards running the code. If this assumption proves false, we catch and handle the exceptions that are raised. We actually used this principle already. Can you guess where? Take a close look at the <code>@elms.setter</code> method of the <code>Pupil</code> class:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a6e22e>@elms.setter</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>elms</span>(self, subject_and_grade):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        subject, grade <span style=color:#f92672>=</span> subject_and_grade
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>ValueError</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>ValueError</span>(<span style=color:#e6db74>&#34;Pass and iterable with two items: subject and grade&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    passed <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>passed(grade)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> passed:
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_elms[subject] <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#39;The exam was not passed so no ELM was awarded!&#39;</span>)
</span></span></code></pre></div><p>The <code>try ... except ...</code> code block implements the EAFP principle. We assume that the <code>subject_and_grade</code> tuple exists. If it does, we unpack its values into <code>subject, grade</code>. If <code>subject_and_grade</code> is not a valid tuple, a <code>ValueError</code> will be raised. We catch this error in the <code>except</code> block and handle it appropriately.</p><p>The EAFP implementation of our <code>lets_fly</code> method would look as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>lets_fly</span>(thing):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>    	thing<span style=color:#f92672>.</span>fly()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> (<span style=color:#a6e22e>AttributeError</span>, <span style=color:#a6e22e>TypeError</span>) <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>    	print(e)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>lets_fly(mocking_knight)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> The Mocking Knight: Whooooosh<span style=color:#960050;background-color:#1e0010>!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>lets_fly(lissy) 
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> Lissy Spinster: I<span style=color:#e6db74>&#39;m flying!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>lets_fly(bromley)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#e6db74>&#39;CastleKilmereMember&#39;</span> object has no attribute <span style=color:#e6db74>&#39;fly&#39;</span>
</span></span></code></pre></div><p>As we can see in the example above, we get exactly the behavior we want. Both the Mocking Knight and Lissy can fly, whereas Bromley, who is way too old to fly on a broomstick, is not able to fly.</p><p>To add another example of the EAFP principle to our Magical Universe we first extend our <code>CastleKilmereMember</code> class with a <code>_traits</code> attribute and two methods for adding and printing traits:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CastleKilmereMember</span>:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34; Creates a member of the Castle Kilmere School of Magic &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(<span style=color:#f92672>...</span>):
</span></span><span style=display:flex><span>    	<span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_traits <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add_trait</span>(self, trait, value<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_traits[trait] <span style=color:#f92672>=</span> value
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>print_traits</span>(self):
</span></span><span style=display:flex><span>        true_traits <span style=color:#f92672>=</span> [trait <span style=color:#66d9ef>for</span> trait, value <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>_traits<span style=color:#f92672>.</span>items() <span style=color:#66d9ef>if</span> value]
</span></span><span style=display:flex><span>        false_traits <span style=color:#f92672>=</span> [trait <span style=color:#66d9ef>for</span> trait, value <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>_traits<span style=color:#f92672>.</span>items() <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> value]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> true_traits:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>_name<span style=color:#e6db74>}</span><span style=color:#e6db74> is </span><span style=color:#e6db74>{</span><span style=color:#e6db74>&#39;, &#39;</span><span style=color:#f92672>.</span>join(true_traits)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> false_traits:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>_name<span style=color:#e6db74>}</span><span style=color:#e6db74> is not </span><span style=color:#e6db74>{</span><span style=color:#e6db74>&#39;, &#39;</span><span style=color:#f92672>.</span>join(false_traits)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>not</span> true_traits <span style=color:#f92672>and</span> <span style=color:#f92672>not</span> false_traits):
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>_name<span style=color:#e6db74>}</span><span style=color:#e6db74> does not have traits yet&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span></code></pre></div><p>Let&rsquo;s use this code to add traits to Bromley, Castle Kilmeres loyal caretaker. As we all know, Bromley is a very kind man, who is tidy-minded (after all, he&rsquo;s a caretaker). But if there is something Bromley is NOT it&rsquo;s impatient. We can now account for Bromleys personality by adding the different traits to the bromley instance:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>bromley <span style=color:#f92672>=</span> CastleKilmereMember(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Bromley Huckabee&#39;</span>, birthyear<span style=color:#f92672>=</span><span style=color:#ae81ff>1959</span>, sex<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;male&#39;</span>)
</span></span><span style=display:flex><span>bromley<span style=color:#f92672>.</span>add_trait(<span style=color:#e6db74>&#34;kind&#34;</span>)
</span></span><span style=display:flex><span>bromley<span style=color:#f92672>.</span>add_trait(<span style=color:#e6db74>&#34;tidy-minded&#34;</span>)
</span></span><span style=display:flex><span>bromley<span style=color:#f92672>.</span>add_trait(<span style=color:#e6db74>&#34;impatient&#34;</span>, value<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span></code></pre></div><p>For our new <code>_traits</code> attribute we also need a method that checks if a Castle Kilmere member exhibits a certain character trait or not. The method should accept a trait as a string and should return whether or not the person in question possesses that trait. An implementation using EAFP would look as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>exhibits_trait</span>(self, trait: str) <span style=color:#f92672>-&gt;</span> bool:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        value <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>_traits[trait]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> value
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>KeyError</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>    	print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74> does not have a character trait with the name </span><span style=color:#e6db74>{</span>e<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span>
</span></span></code></pre></div><p>The <code>try ... except ...</code> code block assumes that the given trait exists as a key. If this assumption proves false (i.e. a <code>KeyError</code> is raised) it handles the error.</p><h2 id=look-before-you-leap-lbyl>Look before you leap (LBYL)</h2><p>The opposite of the EAFP principle is called &lsquo;Look before you leap&rsquo; (LBYL). When using LBYL we would first test if a key exists before performing the look-up operation. So our code from above would rather look as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>exhibits_trait</span>(self, trait: str) <span style=color:#f92672>-&gt;</span> bool:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> trait <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>_traits:
</span></span><span style=display:flex><span>        value <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>_traits[trait]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> value
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>self<span style=color:#f92672>.</span>_name<span style=color:#e6db74>}</span><span style=color:#e6db74> does not have a character trait with the name &#39;</span><span style=color:#e6db74>{</span>trait<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span>
</span></span></code></pre></div><p>As mentioned in <a href=https://stackoverflow.com/questions/11360858/what-is-the-eafp-principle-in-python target=_blank rel=noopener>this stackoverflow post</a>: &ldquo;The LBYL version has to search the key inside the dictionary twice, and might also be considered slightly less readable.&rdquo;</p><h2 id=dictget><code>dict.get()</code></h2><p>Before closing this section I want to mention that an even better solution for our <code>exhibits_trait</code> function exists. This solution makes use of the <code>dict.get()</code> function. The <code>dict.get()</code> function can be used to look up a key in a dictionary and return a certain value as a default if the requested key cannot be found. So we wouldn&rsquo;t need a try/except block for the <code>exhibits_trait</code> function at all!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CastleKilmereMember</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(<span style=color:#f92672>...</span>):
</span></span><span style=display:flex><span>    	<span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_traits <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add_trait</span>(self, trait: str, value<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>_traits[trait] <span style=color:#f92672>=</span> value
</span></span><span style=display:flex><span>			
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>exhibits_trait</span>(self, trait: str) <span style=color:#f92672>-&gt;</span> bool:
</span></span><span style=display:flex><span>    	value <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>_traits<span style=color:#f92672>.</span>get(trait, <span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> value
</span></span></code></pre></div></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/zotroneneis/zotroneneis.github.io/edit/main/content/posts/python/magical_universe/day_9_duck_typing.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/python/magical_universe/day_8_extending_universe/ title="Extending the Magical Universe" class="btn filled-button"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Extending the Magical Universe</div></a></div><div class="col-md-6 next-article"><a href=/posts/python/magical_universe/day_10_11_namedtuples/ title=Namedtuples class="btn filled-button"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Namedtuples</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn data-toggle=tooltip data-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#duck-typing>Duck typing</a></li><li><a href=#easier-to-ask-for-forgiveness-than-permission>Easier to ask for forgiveness than permission</a></li><li><a href=#look-before-you-leap-lbyl>Look before you leap (LBYL)</a></li><li><a href=#dictget><code>dict.get()</code></a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://alpopkes.com/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://alpopkes.com/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://alpopkes.com/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://alpopkes.com/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://alpopkes.com/#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://alpopkes.com/#appearances>Talks & Podcasts</a></li><li class=nav-item><a class=smooth-scroll href=https://alpopkes.com/#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:popkes@gmx.net target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>popkes@gmx.net</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2020-2021 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.a01d837827c5183eb1439ce1afe5db5896d8b892671bcbe43996542de67b6510.js integrity="sha256-oB2DeCfFGD6xQ5zhr+XbWJbYuJJnG8vkOZZULeZ7ZRA=" defer></script></body></html>